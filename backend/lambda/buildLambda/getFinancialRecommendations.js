"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFinancialRecommendations = void 0;
const gpt_1 = require("./gpt");
const getFinancialRecommendations = async (event, context) => {
    const response = await (0, gpt_1.getFinancialRecommendationsFromData)(event.arguments.prompt || '');
    const recommentations = JSON.parse(response.content || '');
    return recommentations.map((el) => ({ ...el, __typename: 'Recommendation' }));
};
exports.getFinancialRecommendations = getFinancialRecommendations;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0RmluYW5jaWFsUmVjb21tZW5kYXRpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2dldEZpbmFuY2lhbFJlY29tbWVuZGF0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSwrQkFBMkQ7QUFFcEQsTUFBTSwyQkFBMkIsR0FBa0QsS0FBSyxFQUMzRixLQUFzQyxFQUN0QyxPQUFnQixFQUNsQixFQUFFO0lBQ0EsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFBLHlDQUFtQyxFQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQ3hGLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsQ0FBQTtJQUMxRCxPQUFPLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFrQixFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFBO0FBQ2pHLENBQUMsQ0FBQTtBQVBZLFFBQUEsMkJBQTJCLCtCQU92QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFN5bmNSZXNvbHZlckV2ZW50LCBBcHBTeW5jUmVzb2x2ZXJIYW5kbGVyLCBDb250ZXh0IH0gZnJvbSAnYXdzLWxhbWJkYSdcbmltcG9ydCB7IENoYXRRdWVyeSwgUmVjb21tZW5kYXRpb24gfSBmcm9tICcuL0FQSSdcbmltcG9ydCB7IGdldEZpbmFuY2lhbFJlY29tbWVuZGF0aW9uc0Zyb21EYXRhIH0gZnJvbSAnLi9ncHQnXG5cbmV4cG9ydCBjb25zdCBnZXRGaW5hbmNpYWxSZWNvbW1lbmRhdGlvbnM6IEFwcFN5bmNSZXNvbHZlckhhbmRsZXI8YW55LCBSZWNvbW1lbmRhdGlvbltdPiA9IGFzeW5jIChcbiAgICBldmVudDogQXBwU3luY1Jlc29sdmVyRXZlbnQ8Q2hhdFF1ZXJ5PixcbiAgICBjb250ZXh0OiBDb250ZXh0XG4pID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldEZpbmFuY2lhbFJlY29tbWVuZGF0aW9uc0Zyb21EYXRhKGV2ZW50LmFyZ3VtZW50cy5wcm9tcHQgfHwgJycpXG4gICAgY29uc3QgcmVjb21tZW50YXRpb25zID0gSlNPTi5wYXJzZShyZXNwb25zZS5jb250ZW50IHx8ICcnKVxuICAgIHJldHVybiByZWNvbW1lbnRhdGlvbnMubWFwKChlbDogUmVjb21tZW5kYXRpb24pID0+ICh7IC4uLmVsLCBfX3R5cGVuYW1lOiAnUmVjb21tZW5kYXRpb24nIH0pKVxufVxuIl19