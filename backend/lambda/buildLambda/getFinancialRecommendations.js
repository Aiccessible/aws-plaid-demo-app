"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFinancialRecommendations = void 0;
const gpt_1 = require("./gpt");
const getFinancialRecommendations = async (event, context) => {
    const response = await (0, gpt_1.getFinancialRecommendationsFromData)(event.arguments.prompt || '');
    const recommentations = JSON.parse(response.content || '');
    console.info('Got', recommentations, ' From GPT');
    return recommentations.recommendations.map((el) => ({ ...el, __typename: 'Recommendation' }));
};
exports.getFinancialRecommendations = getFinancialRecommendations;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0RmluYW5jaWFsUmVjb21tZW5kYXRpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2dldEZpbmFuY2lhbFJlY29tbWVuZGF0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSwrQkFBMkQ7QUFFcEQsTUFBTSwyQkFBMkIsR0FBa0QsS0FBSyxFQUMzRixLQUFzQyxFQUN0QyxPQUFnQixFQUNsQixFQUFFO0lBQ0EsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFBLHlDQUFtQyxFQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQ3hGLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsQ0FBQTtJQUMxRCxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxlQUFlLEVBQUUsV0FBVyxDQUFDLENBQUE7SUFDakQsT0FBTyxlQUFlLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQWtCLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxVQUFVLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLENBQUE7QUFDakgsQ0FBQyxDQUFBO0FBUlksUUFBQSwyQkFBMkIsK0JBUXZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwU3luY1Jlc29sdmVyRXZlbnQsIEFwcFN5bmNSZXNvbHZlckhhbmRsZXIsIENvbnRleHQgfSBmcm9tICdhd3MtbGFtYmRhJ1xuaW1wb3J0IHsgQ2hhdFF1ZXJ5LCBSZWNvbW1lbmRhdGlvbiB9IGZyb20gJy4vQVBJJ1xuaW1wb3J0IHsgZ2V0RmluYW5jaWFsUmVjb21tZW5kYXRpb25zRnJvbURhdGEgfSBmcm9tICcuL2dwdCdcblxuZXhwb3J0IGNvbnN0IGdldEZpbmFuY2lhbFJlY29tbWVuZGF0aW9uczogQXBwU3luY1Jlc29sdmVySGFuZGxlcjxhbnksIFJlY29tbWVuZGF0aW9uW10+ID0gYXN5bmMgKFxuICAgIGV2ZW50OiBBcHBTeW5jUmVzb2x2ZXJFdmVudDxDaGF0UXVlcnk+LFxuICAgIGNvbnRleHQ6IENvbnRleHRcbikgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0RmluYW5jaWFsUmVjb21tZW5kYXRpb25zRnJvbURhdGEoZXZlbnQuYXJndW1lbnRzLnByb21wdCB8fCAnJylcbiAgICBjb25zdCByZWNvbW1lbnRhdGlvbnMgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmNvbnRlbnQgfHwgJycpXG4gICAgY29uc29sZS5pbmZvKCdHb3QnLCByZWNvbW1lbnRhdGlvbnMsICcgRnJvbSBHUFQnKVxuICAgIHJldHVybiByZWNvbW1lbnRhdGlvbnMucmVjb21tZW5kYXRpb25zLm1hcCgoZWw6IFJlY29tbWVuZGF0aW9uKSA9PiAoeyAuLi5lbCwgX190eXBlbmFtZTogJ1JlY29tbWVuZGF0aW9uJyB9KSlcbn1cbiJdfQ==