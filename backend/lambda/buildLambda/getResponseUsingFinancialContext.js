"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getResponseUsingFinancialContext = void 0;
const gpt_1 = require("./gpt");
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
const Entities_1 = require("./queries/Entities");
const Security_1 = require("./mappers/Security");
const Accounts_1 = require("./mappers/Accounts");
const Transactions_1 = require("./mappers/Transactions");
const client = new client_dynamodb_1.DynamoDBClient({ region: 'ca-central-1' });
const dateSupportedFiltering = ['TRANSACTION'];
const mapOfInformationOptionToKey = {
    BANKACCOUNTS: 'ACCOUNT',
    INVESTMENTS: 'SECURITY',
    TRANSACTIONS: 'TRANSACTION',
};
const getResponseUsingFinancialContext = async (event, context) => {
    console.info('Get response for', event);
    const informationNeeded = (0, gpt_1.getNeededInformationFromModel)(event.arguments.chat.prompt || '');
    const dateRange = (0, gpt_1.getDateRangeFromModel)(event.arguments.chat.prompt || '');
    await Promise.all([informationNeeded, dateRange]);
    const neededInfo = JSON.parse((await informationNeeded).content || '');
    const dateRangeResponse = JSON.parse((await dateRange).content || '');
    console.info('Context: ', context);
    console.info('Needed info ', neededInfo);
    console.info('Date range: ', dateRangeResponse);
    const user = event.identity?.username;
    let tupleOfTypeToElements;
    tupleOfTypeToElements = await Promise.all(neededInfo.optionsForInformation.map(async (option) => {
        const entityName = mapOfInformationOptionToKey[option].toString();
        return [
            option,
            await client.send((0, Entities_1.GetEntities)({
                username: user || '',
                id: event.arguments.chat.accountId || '',
                dateRange: entityName in dateSupportedFiltering ? dateRangeResponse : undefined,
                entityName: entityName,
            })),
        ];
    }));
    const ddbResponses = tupleOfTypeToElements.map((tuple) => {
        if (tuple[0].toString() === 'INVESTMENTS') {
            const mappedData = (0, Security_1.mapSecuritiesToJoinedData)(tuple[1].Items ?? []);
            return '\nInvestments:\n' + (0, Security_1.mapJointDataToChatInput)(mappedData);
        }
        else if (tuple[0].toString() === 'TRANSACTIONS') {
            return ('\nTranasactions:\n' +
                (tuple[1].Items ?? []).map(Transactions_1.mapDynamoDBToTransaction).map(Transactions_1.mapTransactionToChatInput).join(''));
        }
        else if (tuple[0].toString() === 'BANKACCOUNTS') {
            return ('\nAccounts:\n' + (tuple[1].Items ?? []).map(Accounts_1.mapDynamoDBToAccount).map(Accounts_1.mapAccountToChatInput).join(''));
        }
        else {
            throw new Error('UNRECOGNIZED OPTION ' + tuple[0]);
        }
    });
    const ragData = ddbResponses.join('');
    console.info('FINAL RAG DATA: ', ragData);
    const { prompt } = event.arguments.chat;
    const response = await (0, gpt_1.completeChatFromPrompt)(prompt + ' Use this data for your answer: ' + ragData || '', event.arguments.chat.chatFocus);
    return {
        response: response.content || '',
        __typename: 'ChatResponse',
    };
};
exports.getResponseUsingFinancialContext = getResponseUsingFinancialContext;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0UmVzcG9uc2VVc2luZ0ZpbmFuY2lhbENvbnRleHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZ2V0UmVzcG9uc2VVc2luZ0ZpbmFuY2lhbENvbnRleHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsK0JBT2M7QUFDZCw4REFBMkY7QUFDM0YsaURBQWdEO0FBQ2hELGlEQUF1RjtBQUN2RixpREFBZ0Y7QUFDaEYseURBQTRGO0FBQzVGLE1BQU0sTUFBTSxHQUFHLElBQUksZ0NBQWMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxjQUFjLEVBQUUsQ0FBQyxDQUFBO0FBRTdELE1BQU0sc0JBQXNCLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQTtBQUU5QyxNQUFNLDJCQUEyQixHQUErQjtJQUM1RCxZQUFZLEVBQUUsU0FBUztJQUN2QixXQUFXLEVBQUUsVUFBVTtJQUN2QixZQUFZLEVBQUUsYUFBYTtDQUM5QixDQUFBO0FBQ00sTUFBTSxnQ0FBZ0MsR0FBOEMsS0FBSyxFQUM1RixLQUFnRCxFQUNoRCxPQUFnQixFQUNsQixFQUFFO0lBQ0EsT0FBTyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLENBQUMsQ0FBQTtJQUN2QyxNQUFNLGlCQUFpQixHQUFHLElBQUEsbUNBQTZCLEVBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQzFGLE1BQU0sU0FBUyxHQUFHLElBQUEsMkJBQXFCLEVBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQzFFLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUE7SUFDakQsTUFBTSxVQUFVLEdBQStCLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLGlCQUFpQixDQUFDLENBQUMsT0FBTyxJQUFJLEVBQUUs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TSxFQUFFLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFBO0lBQ3ZDLE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBQSw0QkFBc0IsRUFDekMsTUFBTSxHQUFHLGtDQUFrQyxHQUFHLE9BQU8sSUFBSSxFQUFFLEVBQzNELEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FDakMsQ0FBQTtJQUNELE9BQU87UUFDSCxRQUFRLEVBQUUsUUFBUSxDQUFDLE9BQU8sSUFBSSxFQUFFO1FBQ2hDLFVBQVUsRUFBRSxjQUFjO0tBQzdCLENBQUE7QUFDTCxDQUFDLENBQUE7QUEzRFksUUFBQSxnQ0FBZ0Msb0NBMkQ1QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFN5bmNJZGVudGl0eUNvZ25pdG8sIEFwcFN5bmNSZXNvbHZlckV2ZW50LCBBcHBTeW5jUmVzb2x2ZXJIYW5kbGVyLCBDb250ZXh0IH0gZnJvbSAnYXdzLWxhbWJkYSdcbmltcG9ydCB7IENoYXRRdWVyeSwgQ2hhdFJlc3BvbnNlIH0gZnJvbSAnLi9BUEknXG5pbXBvcnQge1xuICAgIERhdGFSYW5nZVJlc3BvbnNlLFxuICAgIEluZm9ybWF0aW9uT3B0aW9ucyxcbiAgICBJbmZvcm1hdGlvbk9wdGlvbnNSZXNwb25zZSxcbiAgICBjb21wbGV0ZUNoYXRGcm9tUHJvbXB0LFxuICAgIGdldERhdGVSYW5nZUZyb21Nb2RlbCxcbiAgICBnZXROZWVkZWRJbmZvcm1hdGlvbkZyb21Nb2RlbCxcbn0gZnJvbSAnLi9ncHQnXG5pbXBvcnQgeyBEeW5hbW9EQkNsaWVudCwgUXVlcnlDb21tYW5kLCBRdWVyeUNvbW1hbmRPdXRwdXQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtZHluYW1vZGInXG5pbXBvcnQgeyBHZXRFbnRpdGllcyB9IGZyb20gJy4vcXVlcmllcy9FbnRpdGllcydcbmltcG9ydCB7IG1hcEpvaW50RGF0YVRvQ2hhdElucHV0LCBtYXBTZWN1cml0aWVzVG9Kb2luZWREYXRhIH0gZnJvbSAnLi9tYXBwZXJzL1NlY3VyaXR5J1xuaW1wb3J0IHsgbWFwQWNjb3VudFRvQ2hhdElucHV0LCBtYXBEeW5hbW9EQlRvQWNjb3VudCB9IGZyb20gJy4vbWFwcGVycy9BY2NvdW50cydcbmltcG9ydCB7IG1hcER5bmFtb0RCVG9UcmFuc2FjdGlvbiwgbWFwVHJhbnNhY3Rpb25Ub0NoYXRJbnB1dCB9IGZyb20gJy4vbWFwcGVycy9UcmFuc2FjdGlvbnMnXG5jb25zdCBjbGllbnQgPSBuZXcgRHluYW1vREJDbGllbnQoeyByZWdpb246ICdjYS1jZW50cmFsLTEnIH0pXG5cbmNvbnN0IGRhdGVTdXBwb3J0ZWRGaWx0ZXJpbmcgPSBbJ1RSQU5TQUNUSU9OJ11cbmV4cG9ydCB0eXBlIEVudGl0eU5hbWUgPSAnU0VDVVJJVFknIHwgJ1RSQU5TQUNUSU9OJyB8ICdBQ0NPVU5UJ1xuY29uc3QgbWFwT2ZJbmZvcm1hdGlvbk9wdGlvblRvS2V5OiBSZWNvcmQ8c3RyaW5nLCBFbnRpdHlOYW1lPiA9IHtcbiAgICBCQU5LQUNDT1VOVFM6ICdBQ0NPVU5UJyxcbiAgICBJTlZFU1RNRU5UUzogJ1NFQ1VSSVRZJyxcbiAgICBUUkFOU0FDVElPTlM6ICdUUkFOU0FDVElPTicsXG59XG5leHBvcnQgY29uc3QgZ2V0UmVzcG9uc2VVc2luZ0ZpbmFuY2lhbENvbnRleHQ6IEFwcFN5bmNSZXNvbHZlckhhbmRsZXI8YW55LCBDaGF0UmVzcG9uc2U+ID0gYXN5bmMgKFxuICAgIGV2ZW50OiBBcHBTeW5jUmVzb2x2ZXJFdmVudDx7IGNoYXQ6IENoYXRRdWVyeSB9PixcbiAgICBjb250ZXh0OiBDb250ZXh0XG4pID0+IHtcbiAgICBjb25zb2xlLmluZm8oJ0dldCByZXNwb25zZSBmb3InLCBldmVudClcbiAgICBjb25zdCBpbmZvcm1hdGlvbk5lZWRlZCA9IGdldE5lZWRlZEluZm9ybWF0aW9uRnJvbU1vZGVsKGV2ZW50LmFyZ3VtZW50cy5jaGF0LnByb21wdCB8fCAnJylcbiAgICBjb25zdCBkYXRlUmFuZ2UgPSBnZXREYXRlUmFuZ2VGcm9tTW9kZWwoZXZlbnQuYXJndW1lbnRzLmNoYXQucHJvbXB0IHx8ICcnKVxuICAgIGF3YWl0IFByb21pc2UuYWxsKFtpbmZvcm1hdGlvbk5lZWRlZCwgZGF0ZVJhbmdlXSlcbiAgICBjb25zdCBuZWVkZWRJbmZvOiBJbmZvcm1hdGlvbk9wdGlvbnNSZXNwb25zZSA9IEpTT04ucGFyc2UoKGF3YWl0IGluZm9ybWF0aW9uTmVlZGVkKS5jb250ZW50IHx8ICcnKVxuICAgIGNvbnN0IGRhdGVSYW5nZVJlc3BvbnNlOiBEYXRhUmFuZ2VSZXNwb25zZSA9IEpTT04ucGFyc2UoKGF3YWl0IGRhdGVSYW5nZSkuY29udGVudCB8fCAnJylcbiAgICBjb25zb2xlLmluZm8oJ0NvbnRleHQ6ICcsIGNvbnRleHQpXG4gICAgY29uc29sZS5pbmZvKCdOZWVkZWQgaW5mbyAnLCBuZWVkZWRJbmZvKVxuICAgIGNvbnNvbGUuaW5mbygnRGF0ZSByYW5nZTogJywgZGF0ZVJhbmdlUmVzcG9uc2UpXG4gICAgY29uc3QgdXNlciA9IChldmVudC5pZGVudGl0eSBhcyBBcHBTeW5jSWRlbnRpdHlDb2duaXRvKT8udXNlcm5hbWVcbiAgICBsZXQgdHVwbGVPZlR5cGVUb0VsZW1lbnRzOiBbSW5mb3JtYXRpb25PcHRpb25zLCBRdWVyeUNvbW1hbmRPdXRwdXRdW11cbiAgICB0dXBsZU9mVHlwZVRvRWxlbWVudHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgbmVlZGVkSW5mby5vcHRpb25zRm9ySW5mb3JtYXRpb24ubWFwKGFzeW5jIChvcHRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSBtYXBPZkluZm9ybWF0aW9uT3B0aW9uVG9LZXlbb3B0aW9uXS50b1N0cmluZygpXG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIG9wdGlvbixcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGllbnQuc2VuZChcbiAgICAgICAgICAgICAgICAgICAgR2V0RW50aXRpZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZXZlbnQuYXJndW1lbnRzLmNoYXQuYWNjb3VudElkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlOiBlbnRpdHlOYW1lIGluIGRhdGVTdXBwb3J0ZWRGaWx0ZXJpbmcgPyBkYXRlUmFuZ2VSZXNwb25zZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eU5hbWU6IGVudGl0eU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSlcbiAgICApXG4gICAgY29uc3QgZGRiUmVzcG9uc2VzID0gdHVwbGVPZlR5cGVUb0VsZW1lbnRzLm1hcCgodHVwbGUpID0+IHtcbiAgICAgICAgaWYgKHR1cGxlWzBdLnRvU3RyaW5nKCkgPT09ICdJTlZFU1RNRU5UUycpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBlZERhdGEgPSBtYXBTZWN1cml0aWVzVG9Kb2luZWREYXRhKHR1cGxlWzFdLkl0ZW1zID8/IFtdKVxuICAgICAgICAgICAgcmV0dXJuICdcXG5JbnZlc3RtZW50czpcXG4nICsgbWFwSm9pbnREYXRhVG9DaGF0SW5wdXQobWFwcGVkRGF0YSlcbiAgICAgICAgfSBlbHNlIGlmICh0dXBsZVswXS50b1N0cmluZygpID09PSAnVFJBTlNBQ1RJT05TJykge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAnXFxuVHJhbmFzYWN0aW9uczpcXG4nICtcbiAgICAgICAgICAgICAgICAodHVwbGVbMV0uSXRlbXMgPz8gW10pLm1hcChtYXBEeW5hbW9EQlRvVHJhbnNhY3Rpb24pLm1hcChtYXBUcmFuc2FjdGlvblRvQ2hhdElucHV0KS5qb2luKCcnKVxuICAgICAgICAgICAgKVxuICAgICAgICB9IGVsc2UgaWYgKHR1cGxlWzBdLnRvU3RyaW5nKCkgPT09ICdCQU5LQUNDT1VOVFMnKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICdcXG5BY2NvdW50czpcXG4nICsgKHR1cGxlWzFdLkl0ZW1zID8/IFtdKS5tYXAobWFwRHluYW1vREJUb0FjY291bnQpLm1hcChtYXBBY2NvdW50VG9DaGF0SW5wdXQpLmpvaW4oJycpXG4gICAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VOUkVDT0dOSVpFRCBPUFRJT04gJyArIHR1cGxlWzBdKVxuICAgICAgICB9XG4gICAgfSlcbiAgICBjb25zdCByYWdEYXRhID0gZGRiUmVzcG9uc2VzLmpvaW4oJycpXG4gICAgY29uc29sZS5pbmZvKCdGSU5BTCBSQUcgREFUQTogJywgcmFnRGF0YSlcbiAgICBjb25zdCB7IHByb21wdCB9ID0gZXZlbnQuYXJndW1lbnRzLmNoYXRcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbXBsZXRlQ2hhdEZyb21Qcm9tcHQoXG4gICAgICAgIHByb21wdCArICcgVXNlIHRoaXMgZGF0YSBmb3IgeW91ciBhbnN3ZXI6ICcgKyByYWdEYXRhIHx8ICcnLFxuICAgICAgICBldmVudC5hcmd1bWVudHMuY2hhdC5jaGF0Rm9jdXNcbiAgICApXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlLmNvbnRlbnQgfHwgJycsXG4gICAgICAgIF9fdHlwZW5hbWU6ICdDaGF0UmVzcG9uc2UnLFxuICAgIH1cbn1cbiJdfQ==